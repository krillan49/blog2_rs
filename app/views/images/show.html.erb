<p style="color: green"><%= notice %></p>

<%# render @image %> <!-- - это заменим на... -->
<div class="container">
  <img src="<%= @image.url %>" alt="image <%= @image.id %>" class="img-fluid img-thumbnail rounded">
</div>
<p class="text-center">ID: <%= @image.id %>; Author: <%= @image.author %>; URL: <%= @image.url %></p>
<!-- ======================================== -->

<div>
  <%= link_to "Edit this image", edit_image_path(@image) %> |
  <%= link_to "Back to images", images_path %>

  <%= button_to "Destroy this image", @image, method: :delete %>
</div>


<!-- ===================== comments _form.html.erb ======================== -->
<h1>New comment</h1>

<%= form_for([@image, @image.comments.build]) do |form| %> <!-- изменил на форму как в рубишколе -->

  <!-- ====== Скрываем поля и подставим значения ======= -->
  <div>
    <%= form.hidden_field :commentable_type, value: 'Image' %>
    <%= form.hidden_field :commentable_id, value: @image.id %>
  </div>
  <!-- ================================================== -->

  <div>
    <%= form.label :author, style: "display: block" %>
    <%= form.text_field :author %>
  </div>

  <div>
    <%= form.label :body, style: "display: block" %>
    <%= form.text_area :body %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>

<br>
<!-- ====================================================================== -->


<!-- ===================== Вывод комментов ======================== -->
<h1>All comments</h1>

<% if @image.comments.size < 2 %>
  <h4>Пока еще нет комментариев</h4>
<% end %>

<% @image.comments.each do |comment| %>
  <% if comment.body && comment.body.size > 0 %> <!-- Избавляемся от comments.build -->
    <h6>Author: <%= comment.author %></h6>
    <p>Body: <%= comment.body %></p>
    <hr>
  <% end %>
<% end %>
